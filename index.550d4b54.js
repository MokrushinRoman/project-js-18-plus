!function(){function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},r={},i=n.parcelRequired7c6;null==i&&((i=function(e){if(e in o)return o[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},n.parcelRequired7c6=i);var a,l=i("bpxeT"),s=i("2TvXO"),u=i("3SEMc"),c=i("iU1Pc"),d=i("hVYKj"),m=i("dZPjZ"),f=i("kvC6y"),v={logInBtn:document.getElementById("logIn"),logInForm:document.getElementById("logInForm"),signUpForm:document.getElementById("signUpForm"),emailInput:document.querySelector("#email"),passwordInput:document.querySelector("#password"),modal:document.querySelector(".auth-modal"),close:document.getElementById("auth-close"),logOutBtn:document.getElementById("logOutButton"),inputFile:document.getElementById("file"),removeFileBtn:document.getElementById("file-remove-button")},p=/(?=.*?[A-Z])(?=.*?[a-z]).{6,}/,g=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,h=function(e){e.target==v.modal&&b()},w=function(e){"Escape"===e.key&&b()},y=function(){console.log("click, logOUT!!!"),(0,m.onClickBtnHome)(),U()},L=function(){b()},E=function(){v.inputFile.style.background="unset",v.removeFileBtn.classList.toggle("hide"),v.inputFile.value=null},F=function(e){e.forEach((function(e){var t=e.el,n=e.message,o=t.closest(".form-control");o.querySelector("small").innerText=n,o.className="form-control error"}))},k=function(){document.querySelectorAll(".form-control").forEach((function(e){e.classList.contains("error")&&(e.querySelector("small").innerText="",e.classList.remove("error"))}))};function b(){var e,t;clearTimeout(a);var n=document.querySelectorAll(".auth-form");null===(e=v.logInForm)||void 0===e||e.reset(),null===(t=v.signUpForm)||void 0===t||t.reset(),function(){var e,t,n;window.removeEventListener("click",h),window.removeEventListener("keyup",w),v.close.removeEventListener("click",L),null===(e=v.logInForm)||void 0===e||e.removeEventListener("submit",x),null===(t=v.signUpForm)||void 0===t||t.removeEventListener("submit",B),null===(n=v.removeFileBtn)||void 0===n||n.removeEventListener("click",E)}(),n.forEach((function(e){e.classList.contains("hide")||e.classList.add("hide")}))}var B=function(e){e.preventDefault();var t=e.currentTarget.elements,n=t.email,o=t.password,r=t.username,i=t.confirmPassword,l=(t.file,n.value.trim()),s=r.value.trim(),u=o.value.trim(),c=i.value.trim(),d=g.test(l),m=[];s?15<s.length<3&&m.push({el:r,message:"name should be at least 3 symbols and not more than 15 symbols"}):m.push({el:r,message:"name cannot be empty"}),l?d||m.push({el:n,message:"fill correct email"}):m.push({el:n,message:"email cannot be empty"});var v=p.test(u);u?v?u!==c&&(m.push({el:o,message:"Your password and confirmation password do not match"}),m.push({el:i,message:"Your password and confirmation password do not match"})):m.push({el:o,message:"should contain at least one lower and one upper case and be 6 or more"}):m.push({el:o,message:"password cannot be empty"}),F(m),m.length?a=setTimeout((function(){k()}),5e3):((0,f.showLoader)(),function(e){I.apply(this,arguments)}({email:l,password:u,name:s}))},x=function(e){e.preventDefault();var t=e.currentTarget.elements,n=t.email,o=t.password,r=n.value.trim(),i=o.value.trim();return r||F(n),i||F(o),i.length<6&&F(o),U(r,i)};function I(){return I=t(l)(t(s).mark((function e(n){var o,r,i;return t(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.email,r=n.password,i=n.name,e.next=3,(0,u.createUserWithEmailAndPassword)(d.default,o,r).then(function(){var e=t(l)(t(s).mark((function e(n){var o,r,a;return t(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=n.user)){e.next=4;break}return e.next=4,(0,u.updateProfile)(o,{displayName:i}).then((function(){})).catch((function(e){c.Notify.warning("Name wasn't saved")}));case 4:r=o.displayName,(a=document.querySelector("#userContainer"))&&(a.innerText=r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){(0,f.hideLoader)();e.code;var t=e.message;c.Notify.failure(t)}));case 3:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function U(e,t){console.log("come to toggle: "),d.default.currentUser?(T(),d.default.signOut()):((0,f.showLoader)(),(0,u.signInWithEmailAndPassword)(d.default,e,t).then((function(){(0,f.hideLoader)()})).catch((function(e){var t=e.code,n=e.message;"auth/wrong-password"===t?c.Notify.failure("Wrong email or password!"):"auth/user-not-found"===t?c.Notify.failure("User doesn't exist"):c.Notify.failure(n),(0,f.hideLoader)()})))}function T(){document.querySelectorAll(".private-route").forEach((function(e){return e.classList.toggle("hide")}))}function q(){if(e.currentTarget.value){var t=window.URL.createObjectURL(v.inputFile.files[0]);v.inputFile.style.background="url(".concat(t,") no-repeat 100px center / 30px calc(100% - 4px)"),v.removeFileBtn.classList.toggle("hide"),v.removeFileBtn.addEventListener("click",E)}else v.removeFileBtn.classList.toggle("hide"),v.inputFile.style.background="unset",v.removeFileBtn.removeEventListener("click",E)}d.default.onAuthStateChanged((function(e){if(e){T(),v.logOutBtn.addEventListener("click",y);var t=e.displayName;if(t){var n=document.querySelector("#userContainer");n&&(n.innerText=t)}e.uid,e.providerData;(0,f.hideLoader)(),b()}else{var o;null===(o=v.logOutBtn)||void 0===o||o.removeEventListener("click",y),(0,f.hideLoader)()}})),document.querySelectorAll(".auth__button").forEach((function(e){e.addEventListener("click",(function(e){if("show-log-in-form"===e.target.getAttribute("auth")){if(d.default.currentUser)return T(),d.default.signOut();v.modal.classList.toggle("hide"),v.logInForm.classList.remove("hide"),window.addEventListener("click",h),window.addEventListener("keyup",w),v.close.addEventListener("click",L),v.emailInput.focus(),v.logInForm.addEventListener("submit",x)}else v.modal.classList.toggle("hide"),v.signUpForm.closest(".auth-form").classList.remove("hide"),v.inputFile.addEventListener("change",q),window.addEventListener("click",h),window.addEventListener("keyup",w),v.close.addEventListener("click",L),v.signUpForm.addEventListener("submit",B)}))}))}();
//# sourceMappingURL=index.550d4b54.js.map
