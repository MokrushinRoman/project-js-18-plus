var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){o[e]=t},t.parcelRequired7c6=r);var l=r("amyG6"),s=r("eWCmQ"),a=r("f1Qqb"),i=r("dqy6Z"),d=r("gjiCh");const c={logInBtn:document.getElementById("logIn"),logInForm:document.getElementById("logInForm"),signUpForm:document.getElementById("signUpForm"),emailInput:document.querySelector("#email"),passwordInput:document.querySelector("#password"),modal:document.querySelector(".auth-modal"),close:document.getElementById("auth-close"),logOutBtn:document.getElementById("logOutButton"),inputFile:document.getElementById("file"),removeFileBtn:document.getElementById("file-remove-button")},u=/(?=.*?[A-Z])(?=.*?[a-z]).{6,}/,m=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,g=e=>{e.target==c.modal&&L()},p=e=>{"Escape"===e.key&&L()},f=()=>{console.log("click, logOUT!!!"),(0,i.onClickBtnHome)(),k()},v=()=>{L()},h=()=>{c.inputFile.style.background="unset",c.removeFileBtn.classList.toggle("hide"),c.inputFile.value=null},y=e=>{e.forEach((({el:e,message:t})=>{const n=e.closest(".form-control");n.querySelector("small").innerText=t,n.className="form-control error"}))},w=()=>{document.querySelectorAll(".form-control").forEach((e=>{e.classList.contains("error")&&(e.querySelector("small").innerText="",e.classList.remove("error"))}))};function L(){var e,t;clearTimeout(E);const n=document.querySelectorAll(".auth-form");null===(e=c.logInForm)||void 0===e||e.reset(),null===(t=c.signUpForm)||void 0===t||t.reset(),(()=>{var e,t,n;window.removeEventListener("click",g),window.removeEventListener("keyup",p),c.close.removeEventListener("click",v),null===(e=c.logInForm)||void 0===e||e.removeEventListener("submit",b),null===(t=c.signUpForm)||void 0===t||t.removeEventListener("submit",F),null===(n=c.removeFileBtn)||void 0===n||n.removeEventListener("click",h)})(),n.forEach((e=>{e.classList.contains("hide")||e.classList.add("hide")}))}let E;const F=e=>{e.preventDefault();const{elements:{email:t,password:n,username:o,confirmPassword:r,file:i}}=e.currentTarget,c=t.value.trim(),g=o.value.trim(),p=n.value.trim(),f=r.value.trim(),v=m.test(c);let h=[];g?15<g.length<3&&h.push({el:o,message:"name should be at least 3 symbols and not more than 15 symbols"}):h.push({el:o,message:"name cannot be empty"}),c?v||h.push({el:t,message:"fill correct email"}):h.push({el:t,message:"email cannot be empty"});const L=u.test(p);p?L?p!==f&&(h.push({el:n,message:"Your password and confirmation password do not match"}),h.push({el:r,message:"Your password and confirmation password do not match"})):h.push({el:n,message:"should contain at least one lower and one upper case and be 6 or more"}):h.push({el:n,message:"password cannot be empty"}),y(h),h.length?E=setTimeout((()=>{w()}),5e3):((0,d.showLoader)(),async function({email:e,password:t,name:n}){await(0,l.createUserWithEmailAndPassword)(a.default,e,t).then((async e=>{const t=e.user;t&&await(0,l.updateProfile)(t,{displayName:n}).then((()=>{})).catch((e=>{s.Notify.warning("Name wasn't saved")}));var o=t.displayName;const r=document.querySelector("#userContainer");r&&(r.innerText=o)})).catch((e=>{(0,d.hideLoader)();e.code;const t=e.message;s.Notify.failure(t)}))}({email:c,password:p,name:g}))},b=e=>{e.preventDefault();const{elements:{email:t,password:n}}=e.currentTarget,o=t.value.trim(),r=n.value.trim();return o||y(t),r||y(n),r.length<6&&y(n),k(o,r)};function k(e,t){console.log("come to toggle: "),a.default.currentUser?(B(),a.default.signOut()):((0,d.showLoader)(),(0,l.signInWithEmailAndPassword)(a.default,e,t).then((()=>{(0,d.hideLoader)()})).catch((function(e){var t=e.code,n=e.message;"auth/wrong-password"===t?s.Notify.failure("Wrong email or password!"):"auth/user-not-found"===t?s.Notify.failure("User doesn't exist"):s.Notify.failure(n),(0,d.hideLoader)()})))}function B(){document.querySelectorAll(".private-route").forEach((e=>e.classList.toggle("hide")))}function I(){if(e.currentTarget.value){const e=window.URL.createObjectURL(c.inputFile.files[0]);c.inputFile.style.background=`url(${e}) no-repeat 100px center / 30px calc(100% - 4px)`,c.removeFileBtn.classList.toggle("hide"),c.removeFileBtn.addEventListener("click",h)}else c.removeFileBtn.classList.toggle("hide"),c.inputFile.style.background="unset",c.removeFileBtn.removeEventListener("click",h)}a.default.onAuthStateChanged((function(e){if(e){B(),c.logOutBtn.addEventListener("click",f);let t=e.displayName;if(t){const e=document.querySelector("#userContainer");e&&(e.innerText=t)}e.uid,e.providerData;(0,d.hideLoader)(),L()}else{var t;null===(t=c.logOutBtn)||void 0===t||t.removeEventListener("click",f),(0,d.hideLoader)()}}));document.querySelectorAll(".auth__button").forEach((e=>{e.addEventListener("click",(e=>{if("show-log-in-form"===e.target.getAttribute("auth")){if(a.default.currentUser)return B(),a.default.signOut();c.modal.classList.toggle("hide"),c.logInForm.classList.remove("hide"),window.addEventListener("click",g),window.addEventListener("keyup",p),c.close.addEventListener("click",v),c.emailInput.focus(),c.logInForm.addEventListener("submit",b)}else c.modal.classList.toggle("hide"),c.signUpForm.closest(".auth-form").classList.remove("hide"),c.inputFile.addEventListener("change",I),window.addEventListener("click",g),window.addEventListener("keyup",p),c.close.addEventListener("click",v),c.signUpForm.addEventListener("submit",F)}))}));
//# sourceMappingURL=index.a0c6b294.js.map
