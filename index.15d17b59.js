var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){o[e]=t},e.parcelRequired7c6=n);var r=n("amyG6"),l=n("eWCmQ"),s=n("f1Qqb"),a=n("dqy6Z"),i=n("gjiCh");const d={logInBtn:document.getElementById("logIn"),logInForm:document.getElementById("logInForm"),signUpForm:document.getElementById("signUpForm"),emailInput:document.querySelector("#email"),passwordInput:document.querySelector("#password"),modal:document.querySelector(".auth-modal"),close:document.getElementById("auth-close"),logOutBtn:document.getElementById("logOutButton"),inputFile:document.getElementById("file"),removeFileBtn:document.getElementById("file-remove-button"),bodyEl:document.querySelector("body"),userAva:document.querySelector("#userAvatar")},c=/(?=.*?[A-Z])(?=.*?[a-z]).{6,}/,u=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,m=e=>{e.target==d.modal&&w()},g=e=>{"Escape"===e.key&&w()},f=()=>{(0,a.onClickBtnHome)(),F()},p=()=>{w()},v=()=>{d.inputFile.style.background="unset",d.removeFileBtn.classList.toggle("hide"),d.inputFile.value=null},h=e=>{e.forEach((({el:e,message:t})=>{const o=e.closest(".form-control");o.querySelector("small").innerText=t,o.className="form-control error"}))},y=()=>{document.querySelectorAll(".form-control").forEach((e=>{e.classList.contains("error")&&(e.querySelector("small").innerText="",e.classList.remove("error"))}))};function w(){var e,t;clearTimeout(L),d.bodyEl.className="";const o=document.querySelectorAll(".auth-form");null===(e=d.logInForm)||void 0===e||e.reset(),null===(t=d.signUpForm)||void 0===t||t.reset(),(()=>{var e,t,o;window.removeEventListener("click",m),window.removeEventListener("keyup",g),d.close.removeEventListener("click",p),null===(e=d.logInForm)||void 0===e||e.removeEventListener("submit",b),null===(t=d.signUpForm)||void 0===t||t.removeEventListener("submit",E),null===(o=d.removeFileBtn)||void 0===o||o.removeEventListener("click",v)})(),o.forEach((e=>{e.classList.contains("hide")||e.classList.add("hide")}))}let L;const E=e=>{e.preventDefault();const{elements:{email:t,password:o,username:n,confirmPassword:a,file:d}}=e.currentTarget,m=d.value?window.URL.createObjectURL(d.files[0]):null,g=t.value.trim(),f=n.value.trim(),p=o.value.trim(),v=a.value.trim(),w=u.test(g);let E=[];f?(f.length<3||f.length>15)&&E.push({el:n,message:"name should be at least 3 symbols and not more than 15 symbols"}):E.push({el:n,message:"name cannot be empty"}),g?w||E.push({el:t,message:"fill correct email"}):E.push({el:t,message:"email cannot be empty"});const b=c.test(p);p?b?p!==v&&(E.push({el:o,message:"Your password and confirmation password do not match"}),E.push({el:a,message:"Your password and confirmation password do not match"})):E.push({el:o,message:"should contain at least one lower and one upper case and be 6 or more"}):E.push({el:o,message:"password cannot be empty"}),h(E),E.length?L=setTimeout((()=>{y()}),5e3):((0,i.showLoader)(),async function({email:e,password:t,name:o,fileUrl:n}){await(0,r.createUserWithEmailAndPassword)(s.default,e,t).then((async e=>{const t=e.user;let s={displayName:o};n&&(s.photoURL=n),t&&await(0,r.updateProfile)(t,s).catch((e=>{l.Notify.warning("Name wasn't saved")}));const a=t.displayName,i=(t.photoURL,document.querySelector("#userContainer"));i&&(i.innerText=a)})).catch((e=>{(0,i.hideLoader)();e.code;const t=e.message;l.Notify.failure(t)}))}({email:g,password:p,name:f,fileUrl:m}))},b=e=>{e.preventDefault();const{elements:{email:t,password:o}}=e.currentTarget,n=t.value.trim(),r=o.value.trim();return n||h(t),r||h(o),r.length<6&&h(o),F(n,r)};function F(e,t){s.default.currentUser?(k(),s.default.signOut()):((0,i.showLoader)(),(0,r.signInWithEmailAndPassword)(s.default,e,t).then((()=>{(0,i.hideLoader)()})).catch((function(e){var t=e.code,o=e.message;"auth/wrong-password"===t?l.Notify.failure("Wrong email or password!"):"auth/user-not-found"===t?l.Notify.failure("User doesn't exist"):l.Notify.failure(o),(0,i.hideLoader)()})))}function k(){document.querySelectorAll(".private-route").forEach((e=>e.classList.toggle("hide")))}function B(){const{value:e}=d.inputFile;if(e){const e=window.URL.createObjectURL(d.inputFile.files[0]);d.inputFile.style.background=`url(${e}) no-repeat 100px center / 30px calc(100% - 4px)`,d.removeFileBtn.classList.toggle("hide"),d.removeFileBtn.addEventListener("click",v)}else d.removeFileBtn.classList.toggle("hide"),d.inputFile.style.background="unset",d.removeFileBtn.removeEventListener("click",v)}s.default.onAuthStateChanged((function(e){if(e){if(k(),d.logOutBtn.addEventListener("click",f),e.displayName){document.querySelector("#userContainer")}e.uid,e.providerData;(0,i.hideLoader)(),w()}else{var t;null===(t=d.logOutBtn)||void 0===t||t.removeEventListener("click",f),(0,i.hideLoader)()}}));document.querySelectorAll(".auth__button").forEach((e=>{e.addEventListener("click",(e=>{if("show-log-in-form"===e.target.getAttribute("auth")){if(s.default.currentUser)return k(),s.default.signOut();d.bodyEl.classList.add("overflow-hidden"),d.modal.classList.toggle("hide"),d.logInForm.classList.remove("hide"),window.addEventListener("click",m),window.addEventListener("keyup",g),d.close.addEventListener("click",p),d.emailInput.focus(),d.logInForm.addEventListener("submit",b)}else d.bodyEl.classList.add("overflow-hidden"),d.modal.classList.toggle("hide"),d.signUpForm.closest(".auth-form").classList.remove("hide"),d.inputFile.addEventListener("change",B),window.addEventListener("click",m),window.addEventListener("keyup",g),d.close.addEventListener("click",p),d.signUpForm.addEventListener("submit",E)}))}));
//# sourceMappingURL=index.15d17b59.js.map
